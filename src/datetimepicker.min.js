!function(a){function h(){var a=new Date;return{date:a.getDate(),dayOfWeek:b.lang[d.lang].dayOfWeek[a.getDay()],dayOfWeekShort:b.lang[d.lang].dayOfWeekShort[a.getDay()],month:b.lang[d.lang].month[a.getMonth()],monthNum:a.getMonth(),year:a.getFullYear()}}function i(){d.defaultMonth=e.monthNum,d.defaultYear=e.year}function j(a){var c=document.documentElement.getAttribute("lang");c in b.lang&&(d.lang=c);for(var e in a){var h=a[e]+="";if(h&&e in d){if(e in b&&!(a[e]in b[e]))continue;switch(valid=!1,e){case"defaultTime":var i=/([01]\d|2[0-3]):?([0-5]\d)/;if(i.test(a[e])){var j=a[e].split(":");a[e]={hours:parseInt(j[0]),minutes:parseInt(j[1])},valid=!0,g.time.hours=a[e].hours,g.time.minutes=a[e].minutes}break;case"allowPast":case"multiple":var k=[!0,!1,"true","false",0,1,"0","1"];k.indexOf(a[e])>=0&&(0!=a[e]&&1!=a[e]&&"0"!=a[e]&&"1"!=a[e]||(a[e]=!!+a[e]),console.log(e),console.log(a[e]),valid=!0);break;default:valid=!0}valid&&(d[e]=a[e])}}"DateTimePicker"==d.inputName&&f.attr("id")&&(d.inputName=f.attr("id"))}function k(){var a={button:'<div class="button">'+d.buttonText+"</div>",picker:'<div class="picker"></div>',loader:'<div class="loader"></div>',calendar_button:'<div class="button-calendar">'+d.calendarSVG+"</div>",calendar:'<article class="calendar"></article>',calendarMonthSpinner:'<div class="month-spinner"><div class="month-previous arrow-left"></div><div class="month-text"></div><div class="month-next arrow-right"></div></div>',calendarMonth:'<div class="month"></div>',calendarWeek:'<div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div>',calendarDay:'<div class="day"></div>',time_button:'<div class="button-time">'+d.timeSVG+"</div>",time:'<article class="time"><div class="flex-wrap"></div></article>',timeColumn:'<div class="column"><div class="arrow-up"></div><div class="time"></div><div class="arrow-down"></div></div>',outputs:'<div class="outputs"></div>'};f.empty().removeClass().addClass("DateTimePicker"),f.append(a.button),f.append(a.picker);var c=f.children("div.picker");c.append(a.loader),c.append(a.calendar_button).append(a.calendar);var e=c.children("article.calendar");e.append(a.calendarMonthSpinner),e.append(a.calendarMonth);var g=e.children("div.month");g.append(a.calendarWeek),g.children("div.week").addClass("header");for(var h=d.startDay,i=0;i<7;i++)7==h&&(h=0),g.find("div.week.header > div.day").eq(i).text(b.lang[d.lang].dayOfWeekShort[h]),h++;for(var i=0;i<6;i++)g.append(a.calendarWeek);m(d.defaultMonth,d.defaultYear,f),c.append(a.time_button).append(a.time);var j=c.find("article.time > div.flex-wrap"),k=l();j.append(a.timeColumn),j.children("div.column").addClass("hours").children("div.time").append(k.hours),j.append(a.timeColumn),j.children("div.column:last-child").empty().append(":"),j.append(a.timeColumn),j.children("div.column:last-child").addClass("minutes").children("div.time").append(k.minutes),f.append(a.outputs)}function l(){if(hours=g.time.hours+"",minutes=g.time.minutes+"",hours&&minutes){var a=new RegExp("\\d+");if(a.test(hours)&&a.test(minutes))return 1==hours.length&&(hours="0"+hours),1==minutes.length&&(minutes="0"+minutes),{hours:hours,minutes:minutes}}return!1}function m(a,c,f){f.find("div.month-text").text(b.lang[d.lang].month[d.defaultMonth]+" "+d.defaultYear),weeks=f.find("article.calendar div.week").not(".header"),weeks.children(".day").empty().removeClass("prev-month next-month today selected past");for(var g=new Date(c,a,1).getDay(),h=new Date(c,a+1,0).getDate(),i=new Date(c,a,0).getDate(),j=1-g,k=1,l=0;l<6;l++)for(var m=0;m<7;m++){var n=a,o=c,r=j;if(j>h&&l>=4&&m>0)weeks.eq(l).children("div.day").eq(m).text(k).addClass("next-month"),n++,r=k,k++;else{if(j>h&&5==l&&0==m){weeks.eq(l).hide();break}0==l&&m>=g||l>0&&j<=h?weeks.eq(l).children("div.day").eq(m).text(j):j<1&&(weeks.eq(l).children("div.day").eq(m).text(i-g+1).addClass("prev-month"),n--,r=i-g+1,i++)}n<0?o=q(o,n,"prev").year:n>11&&(o=q(o,n,"next").year);var s=new Date(c,a,j),t=new Date(e.year,e.monthNum,e.date,0,0,0,0);s<t&&!d.allowPast&&weeks.eq(l).children("div.day").eq(m).addClass("past"),p(o,n,r)&&weeks.eq(l).children("div.day").eq(m).addClass("selected"),j==e.date&&a==e.monthNum&&c==e.year&&weeks.eq(l).children("div.day").eq(m).addClass("today"),weeks.eq(5).show(),j++}}function n(){a("div.DateTimePicker > div.button").click(function(){a(this).siblings("div.picker").stop().fadeToggle(200)}),a("div.DateTimePicker > div.picker > article.calendar > div.month-spinner > div.month-previous").click(function(){var b=q(d.defaultYear,d.defaultMonth,"prev");d.defaultYear=b.year,d.defaultMonth=b.month,parent=a(this).closest("div.DateTimePicker"),m(d.defaultMonth,d.defaultYear,parent)}),a("div.DateTimePicker > div.picker > article.calendar > div.month-spinner > div.month-next").click(function(){var b=q(d.defaultYear,d.defaultMonth,"next");d.defaultYear=b.year,d.defaultMonth=b.month,parent=a(this).closest("div.DateTimePicker"),m(d.defaultMonth,d.defaultYear,parent)}),a("div.DateTimePicker > div.picker > article.calendar > div.month > div.week:not(.header) div.day").click(function(){o(a(this))}),a("div.DateTimePicker div.button-calendar").click(function(){a(this).siblings("article.time").stop().slideUp(200),a(this).siblings("article.calendar").stop().slideDown(200)}),a("div.DateTimePicker div.button-time").click(function(){a(this).siblings("article.calendar").stop().slideUp(200),a(this).siblings("article.time").stop().slideDown(200)}),a("div.DateTimePicker > div.picker > article.time div.column div.arrow-up, div.DateTimePicker > div.picker > article.time div.column div.arrow-down").click(function(){var b=a(this).closest("div.column").attr("class").split(" ");b.splice(b.indexOf("column"),1);var c=a(this).attr("class");r(a(this).closest("article.time"),b,c)}),a("div.DateTimePicker article.time div.time").click(function(){a(this).hasClass("edit-active")||s(a(this))})}function o(a){var b={month:d.defaultMonth,year:d.defaultYear};if(a.hasClass("prev-month")?b=q(b.year,b.month,"prev"):a.hasClass("next-month")&&(b=q(b.year,b.month,"next")),!a.hasClass("past")||d.allowPast){var c=new Date(b.year,b.month,a.text());d.multiple?a.hasClass("selected")?(g.dates.splice(g.dates.map(Number).indexOf(+c),1),a.removeClass("selected")):(a.addClass("selected"),g.dates.push(c)):(g.dates.pop(),a.closest("div.month").find("div.week:not(.header) div.day").removeClass("selected"),a.addClass("selected"),g.dates.push(c)),u(a),t(a)}}function p(a,b,c){var d=new Date(a,b,c);return g.dates.map(Number).indexOf(+d)>=0}function q(a,b,c){if("prev"===c||"next"===c){switch(c){case"prev":b<=0?(b=11,a--):b--;break;case"next":b>=11?(b=0,a++):b++}return{month:b,year:a}}return!1}function r(a,b,e){if(a&&("hours"==b||"minutes"==b)&&("arrow-up"==e||"arrow-down"==e)){var f=a.find("div."+b+" > div.time");switch(e){case"arrow-up":var h=g.time[b]+d.timeIncrement[b];h>c.time[b].max&&(h=h-c.time[b].max-1),g.time[b]=h;break;case"arrow-down":var h=g.time[b]-d.timeIncrement[b];h<c.time[b].min&&(h=h+c.time[b].max+1),g.time[b]=h}var h=l();f.html(h[b]),u(a),t(a)}return!1}function s(b){var d=b.text();b.empty().addClass("edit-active").append('<input type="text" maxlength="2" value="'+d+"\" onkeypress='return event.charCode >= 48 && event.charCode <= 57'>"),b.find('input[type="text"]').focus(),b.find('input[type="text"]').on("focusout keypress",function(d){if("keypress"!==d.type||13==d.which){var e=a(this).val().replace(/-/,""),f=a(this).closest("div.column").attr("class").split(" ");f.splice(f.indexOf("column"),1),e&&e>=c.time[f].min&&e<=c.time[f].max&&(g.time[f]=parseInt(e)),a(this).parent("div.time").removeClass("edit-active").append(l()[f]),a(this).remove(),u(b)}})}function t(a){var b=a.closest("div.DateTimePicker").children("div.outputs");if(b.empty(),g.dates.length>0){b.append('<input type="hidden" id="'+d.inputName+'-count" value="'+g.dates.length+'">');for(var c=0;c<g.dates.length;c++){var e=g.dates[c].getFullYear()+"-"+(g.dates[c].getMonth()+1)+"-"+g.dates[c].getDate();b.append('<input type="hidden" id="'+d.inputName+"-date-"+c+'" value="'+e+'">')}var f=l();b.append('<input type="hidden" id="'+d.inputName+'-time" value="'+f.hours+":"+f.minutes+'">')}}function u(a){var c=a.closest("div.DateTimePicker").children("div.button"),e=g.dates.length,f=d.buttonText,h=l();1==e?f=g.dates[0].getDate()+" "+b.lang[d.lang].month[g.dates[0].getMonth()]+" "+g.dates[0].getFullYear()+" @ "+h.hours+":"+h.minutes:e>1&&(f=e+" Dates Selected"),c.html(f);c.outerHeight();a.closest("div.DateTimePicker").children("div.picker").css("top",c.height()+20)}var f,b={lang:{en:{dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month:["January","February","March","April","May","June","July","August","September","October","November","December"]},de:{dayOfWeek:["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],month:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]}},style:{default:""}},c={time:{hours:{min:0,max:23},minutes:{min:0,max:59}}},d={lang:"en",multiple:!1,style:"default",defaultTime:{hours:12,minutes:0},timeIncrement:{hours:1,minutes:5},defaultMonth:"",defaultYear:"",allowPast:!1,buttonText:"Select Date",startDay:"0",calendarSVG:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20 20h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm6 0h-4v4h4v-4zm-6-6h-4v4h4v-4zm16-8v22h-24v-22h3v1c0 1.103.897 2 2 2s2-.897 2-2v-1h10v1c0 1.103.897 2 2 2s2-.897 2-2v-1h3zm-2 6h-20v14h20v-14zm-2-7c0-.552-.447-1-1-1s-1 .448-1 1v2c0 .552.447 1 1 1s1-.448 1-1v-2zm-14 2c0 .552-.447 1-1 1s-1-.448-1-1v-2c0-.552.447-1 1-1s1 .448 1 1v2z"/></svg>',timeSVG:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 14h-7v-8h2v6h5v2z"/></svg>',inputName:"DateTimePicker"},e=h(),g={dates:[],time:{hours:d.defaultTime.hours,minutes:d.defaultTime.minutes}};a.fn.dateTimePicker=function(a){f=this,i(),j(a),k(),n()}}(jQuery);
